"use strict";(self["webpackChunkweather_app"]=self["webpackChunkweather_app"]||[]).push([[496],{2496:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var s=a(6252),i=a(9963),o=a(3577);const c={class:"wrapper_chart-view"},l={class:"wrapper_input"},n={key:0},r=["onClick"],h={class:"chart-container"},p={key:0,class:"chart-header"},u={ref:"chart"};function d(e,t,a,d,g,m){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",l,[(0,s.wy)((0,s._)("input",{class:"city_search",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>g.city=e),onInput:t[1]||(t[1]=(...e)=>m.getAutocompleteSuggestions&&m.getAutocompleteSuggestions(...e)),placeholder:"Enter city name"},null,544),[[i.nr,g.city]]),g.showAutocomplete?((0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.autocompleteSuggestions,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t,onClick:t=>m.selectAutocompleteSuggestion(e)},(0,o.zw)(e.name),9,r)))),128))])])):(0,s.kq)("",!0)]),(0,s._)("div",h,[g.selectedCity?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("h2",null,(0,o.zw)(g.selectedCity.name),1)])):(0,s.kq)("",!0),(0,s._)("canvas",u,null,512)])])}var g=a(6154),m=a(9471),y={data(){return{city:"",autocompleteSuggestions:[],showAutocomplete:!1,selectedCity:null,chart:null}},methods:{getAutocompleteSuggestions(){this.city.length>=3?g.Z.get(`https://api.openweathermap.org/geo/1.0/direct?q=${this.city}&limit=5&appid=9e0c0b81e69f8f703822e588b6e3cf05`).then((e=>{this.autocompleteSuggestions=e.data,this.showAutocomplete=!0})).catch((e=>{console.log(e)})):this.showAutocomplete=!1},selectAutocompleteSuggestion(e){this.city=e.name,this.showAutocomplete=!1,this.getSelectedCityData(e)},getSelectedCityData(e){g.Z.get(`https://api.openweathermap.org/data/2.5/forecast?q=${e.name}&appid=9e0c0b81e69f8f703822e588b6e3cf05&units=metric`).then((t=>{const a=t.data.list.slice(0,8),s=a.map((e=>new Date(1e3*e.dt).toLocaleTimeString("en-US",{hour:"numeric",hour12:!0}))),i=a.map((e=>e.main.temp));this.selectedCity={name:e.name,labels:s,temperatures:i}})).catch((e=>{console.log(e)}))},renderChart(){if(this.$refs.chart&&this.selectedCity){const e=this.$refs.chart,t=e.getContext("2d"),a={labels:this.selectedCity.labels,datasets:[{label:"Temperature (Â°C)",data:this.selectedCity.temperatures,fill:!0,backgroundColor:"rgba(0, 119, 204, 0.3)",borderColor:"rgba(0, 119, 204, 1)",borderWidth:1,pointRadius:0}]},s={responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}}};this.chart&&this.chart.destroy(),this.chart=new m.Z(t,{type:"line",data:a,options:s})}}},watch:{selectedCity(){this.renderChart()}}},w=a(3744);const C=(0,w.Z)(y,[["render",d],["__scopeId","data-v-1eadba87"]]);var f=C}}]);
//# sourceMappingURL=496.deda3d3a.js.map